import {GameStatsComponent} from "../../../../main/webapp/app/game/game-stats.component";

// @ts-ignore
const stats = {
    "messages": [
        {
            "timestamp": "00:00:00.00",
            "user": "SiD`",
            "body": "Hf"
        },
        {
            "timestamp": "00:00:00.00",
            "user": "Siwy",
            "body": "hf"
        },
        {
            "timestamp": "00:00:00.00",
            "user": "NNN`Rafka",
            "body": "glhf!"
        },
        {
            "timestamp": "00:00:00.00",
            "user": "TVPenguin",
            "body": "gl hf"
        },
        {
            "timestamp": "00:00:03.42",
            "user": "TheExtremist",
            "body": "we salute you"
        },
        {
            "timestamp": "00:00:04.24",
            "user": "xPoDxSilaneo",
            "body": "hf"
        },
        {
            "timestamp": "00:04:12.94",
            "user": "NNN`Rafka",
            "body": "aw"
        },
        {
            "timestamp": "00:17:54.48",
            "user": "xPoDxSilaneo",
            "body": "gg"
        },
        {
            "timestamp": "00:18:30.78",
            "user": "SiD`",
            "body": "gg"
        },
        {
            "timestamp": "00:18:31.46",
            "user": "TVPenguin",
            "body": "gg"
        },
        {
            "timestamp": "00:18:32.32",
            "user": "SiD`",
            "body": "wp"
        },
        {
            "timestamp": "00:18:32.62",
            "user": "Siwy",
            "body": "gg"
        },
        {
            "timestamp": "00:18:33.18",
            "user": "NNN`Rafka",
            "body": "gg"
        },
        {
            "timestamp": "00:18:35.58",
            "user": "NNN`Rafka",
            "body": "saw this"
        },
        {
            "timestamp": "00:18:36.18",
            "user": "TheExtremist",
            "body": "gg"
        },
        {
            "timestamp": "00:18:41.50",
            "user": "NNN`Rafka",
            "body": "but too less time to thing"
        },
        {
            "timestamp": "00:18:43.10",
            "user": "NNN`Rafka",
            "body": "for a hide"
        }
    ],
    "turns": [
        {
            "timestamp": "00:00:00.00",
            "user": "NNN`Rafka",
            "weapons": [
                "Select Worm",
                "Ninja Rope",
                "Low Gravity",
                "Baseball Bat"
            ],
            "damages": [
                {
                    "damage": 200,
                    "kills": 2,
                    "victim": "Siwy"
                }
            ],
            "timeUsedSeconds": 44.38,
            "retreatSeconds": 3.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:01:00.90",
            "user": "Siwy",
            "weapons": [
                "Ninja Rope",
                "Ninja Rope",
                "Longbow",
                "Longbow"
            ],
            "damages": [
                {
                    "damage": 115,
                    "kills": 1,
                    "victim": "NNN`Rafka"
                }
            ],
            "timeUsedSeconds": 39.92,
            "retreatSeconds": 3.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:01:56.72",
            "user": "NNN`Rafka",
            "weapons": [
                "Select Worm",
                "Sheep"
            ],
            "damages": [
                {
                    "damage": 100,
                    "kills": 1,
                    "victim": "Siwy"
                },
                {
                    "damage": 6,
                    "kills": 0,
                    "victim": "NNN`Rafka"
                }
            ],
            "timeUsedSeconds": 43.4,
            "retreatSeconds": 3.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:02:54.36",
            "user": "Siwy",
            "weapons": [
                "Low Gravity",
                "Baseball Bat"
            ],
            "damages": [
                {
                    "damage": 100,
                    "kills": 1,
                    "victim": "NNN`Rafka"
                }
            ],
            "timeUsedSeconds": 21.42,
            "retreatSeconds": 3.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:03:26.30",
            "user": "NNN`Rafka",
            "weapons": [
                "Ninja Rope",
                "Parachute"
            ],
            "damages": [
                {
                    "damage": 1,
                    "kills": 0,
                    "victim": "NNN`Rafka"
                }
            ],
            "timeUsedSeconds": 39.96,
            "retreatSeconds": 0.0,
            "lossOfControl": true
        },
        {
            "timestamp": "00:04:16.02",
            "user": "Siwy",
            "weapons": [
                "Select Worm",
                "Mine"
            ],
            "damages": [
                {
                    "damage": 99,
                    "kills": 1,
                    "victim": "NNN`Rafka"
                }
            ],
            "timeUsedSeconds": 26.74,
            "retreatSeconds": 5.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:05:09.42",
            "user": "NNN`Rafka",
            "weapons": [
                "Ninja Rope",
                "Shotgun",
                "Shotgun"
            ],
            "damages": [
                {
                    "damage": 52,
                    "kills": 0,
                    "victim": "Siwy"
                }
            ],
            "timeUsedSeconds": 44.66,
            "retreatSeconds": 3.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:06:10.96",
            "user": "Siwy",
            "weapons": [
                "Ninja Rope",
                "Sheep"
            ],
            "damages": [
                {
                    "damage": 4,
                    "kills": 0,
                    "victim": "Siwy"
                },
                {
                    "damage": 64,
                    "kills": 0,
                    "victim": "NNN`Rafka"
                }
            ],
            "timeUsedSeconds": 24.2,
            "retreatSeconds": 2.98,
            "lossOfControl": true
        },
        {
            "timestamp": "00:06:47.94",
            "user": "NNN`Rafka",
            "weapons": [
                "Shotgun",
                "Shotgun"
            ],
            "damages": [
                {
                    "damage": 50,
                    "kills": 0,
                    "victim": "Siwy"
                }
            ],
            "timeUsedSeconds": 44.52,
            "retreatSeconds": 3.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:07:47.74",
            "user": "Siwy",
            "weapons": [
                "Ninja Rope",
                "Dynamite"
            ],
            "damages": [
                {
                    "damage": 4,
                    "kills": 0,
                    "victim": "Siwy"
                },
                {
                    "damage": 89,
                    "kills": 0,
                    "victim": "NNN`Rafka"
                }
            ],
            "timeUsedSeconds": 18.38,
            "retreatSeconds": 4.86,
            "lossOfControl": true
        },
        {
            "timestamp": "00:08:20.32",
            "user": "NNN`Rafka",
            "weapons": [
                "Shotgun",
                "Shotgun"
            ],
            "damages": [
                {
                    "damage": 50,
                    "kills": 0,
                    "victim": "Siwy"
                }
            ],
            "timeUsedSeconds": 44.24,
            "retreatSeconds": 3.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:09:22.82",
            "user": "Siwy",
            "weapons": [
                "Shotgun",
                "Shotgun"
            ],
            "damages": [
                {
                    "damage": 11,
                    "kills": 1,
                    "victim": "NNN`Rafka"
                }
            ],
            "timeUsedSeconds": 24.3,
            "retreatSeconds": 3.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:10:03.32",
            "user": "NNN`Rafka",
            "weapons": [
                "Shotgun",
                "Shotgun"
            ],
            "damages": [
                {
                    "damage": 44,
                    "kills": 1,
                    "victim": "Siwy"
                }
            ],
            "timeUsedSeconds": 43.82,
            "retreatSeconds": 3.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:11:11.08",
            "user": "Siwy",
            "weapons": [
                "Select Worm",
                "Ninja Rope",
                "Grenade"
            ],
            "damages": [
                {
                    "damage": 94,
                    "kills": 1,
                    "victim": "NNN`Rafka"
                }
            ],
            "timeUsedSeconds": 26.82,
            "retreatSeconds": 5.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:11:50.60",
            "user": "NNN`Rafka",
            "weapons": [
                "Jet Pack",
                "Dynamite"
            ],
            "damages": [
                {
                    "damage": 100,
                    "kills": 1,
                    "victim": "Siwy"
                }
            ],
            "timeUsedSeconds": 44.34,
            "retreatSeconds": 5.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:12:48.78",
            "user": "Siwy",
            "weapons": [
                "Select Worm",
                "Shotgun",
                "Shotgun"
            ],
            "damages": [
                {
                    "damage": 50,
                    "kills": 0,
                    "victim": "NNN`Rafka"
                }
            ],
            "timeUsedSeconds": 43.44,
            "retreatSeconds": 3.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:13:47.78",
            "user": "NNN`Rafka",
            "weapons": [
                "Shotgun",
                "Shotgun"
            ],
            "damages": [
                {
                    "damage": 50,
                    "kills": 1,
                    "victim": "Siwy"
                }
            ],
            "timeUsedSeconds": 36.72,
            "retreatSeconds": 3.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:14:48.34",
            "user": "Siwy",
            "weapons": [
                "Shotgun",
                "Shotgun"
            ],
            "damages": [
                {
                    "damage": 22,
                    "kills": 0,
                    "victim": "NNN`Rafka"
                }
            ],
            "timeUsedSeconds": 33.04,
            "retreatSeconds": 3.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:15:32.54",
            "user": "NNN`Rafka",
            "weapons": [
                "Shotgun",
                "Shotgun"
            ],
            "damages": [
                {
                    "damage": 46,
                    "kills": 1,
                    "victim": "Siwy"
                }
            ],
            "timeUsedSeconds": 4.86,
            "retreatSeconds": 3.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:15:57.48",
            "user": "Siwy",
            "weapons": [
                "Ninja Rope",
                "Mad Cow"
            ],
            "damages": [
                {
                    "damage": 115,
                    "kills": 1,
                    "victim": "NNN`Rafka"
                }
            ],
            "timeUsedSeconds": 29.62,
            "retreatSeconds": 3.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:16:40.24",
            "user": "NNN`Rafka",
            "weapons": [
                "Shotgun",
                "Shotgun"
            ],
            "damages": [
                {
                    "damage": 50,
                    "kills": 0,
                    "victim": "Siwy"
                }
            ],
            "timeUsedSeconds": 41.64,
            "retreatSeconds": 3.0,
            "lossOfControl": false
        },
        {
            "timestamp": "00:17:35.80",
            "user": "Siwy",
            "weapons": [
                "Jet Pack",
                "Shotgun",
                "Shotgun"
            ],
            "damages": [
                {
                    "damage": 34,
                    "kills": 2,
                    "victim": "NNN`Rafka"
                }
            ],
            "timeUsedSeconds": 41.26,
            "retreatSeconds": 1.54,
            "lossOfControl": false
        }
    ],
    // @ts-ignore
    "suddenDeath": null,
    "spectators": [
        {
            "user": "SiD`",
            "host": true
        },
        {
            "user": "TVPenguin",
            "host": false
        },
        {
            "user": "TheExtremist",
            "host": false
        },
        {
            "user": "xPoDxSilaneo",
            "host": false
        },
        {
            "user": "waldek",
            "host": false
        }
    ],
    "teams": [
        {
            "color": "Red",
            "user": "Siwy",
            "team": "mloda kadra",
            "localPlayer": false
        },
        {
            "color": "Blue",
            "user": "NNN`Rafka",
            "team": "Men of faith",
            "localPlayer": true
        }
    ],
    "teamTimeTotals": [
        {
            "team": "mloda kadra",
            "user": "Siwy",
            "turn": "00:05:29.14",
            "retreat": "00:00:37.38",
            "total": "00:06:06.52",
            "turnCount": 11
        },
        {
            "team": "Men of faith",
            "user": "NNN`Rafka",
            "turn": "00:07:12.54",
            "retreat": "00:00:32.00",
            "total": "00:07:44.54",
            "turnCount": 11
        }
    ],
    "gameId": "10719273",
    "startedAt": "2020-01-09 11:48:26 GMT",
    "engineVersion": "3.7.2.1",
    "fileFormatVersion": [
        "3.6.29.48",
        "3.7.2.1"
    ],
    "exportVersion": "3.7.2.1",
    "gameEnd": "00:18:46.04",
    "roundTime": "0:18:46",
    "totalGameTimeElapsed": "0:18:46",
    "winsTheRound": "mloda kadra",
    "wormOfTheRound": {
        "worm": "Jasny lis",
        "team": "mloda kadra"
    },
    "mostDamageWithOneShot": {
        "damage": "200",
        "worm": "Jozue",
        "team": "Men of faith"
    }
};

describe('GameStatsComponent can calc in', () => {
    it('turn 1: NNN`Rafka dealing 200', () => {
        const component = new GameStatsComponent();
        component.stats = stats;
        component.totalHealthPointsPerTeam = 800;
        let actual = component.linearGradientHealthPoints(1);
        expect(actual).toEqual(
            "linear-gradient(to right, #1B2021 0, #1B2021 12.5%, rgb(255,127,127,.5) 12.5%, rgb(255,127,127,.5) 50%, rgb(157,159,255,.5) 50%, rgb(157,159,255,.5) 100%, #1B2021 100%, #1B2021 100%)",
            "actual is " + actual);
    });

    it('turn 2: Siwy dealing 115', () => {
        const component = new GameStatsComponent();
        component.stats = stats;
        component.totalHealthPointsPerTeam = 800;
        let actual = component.linearGradientHealthPoints(2);
        expect(actual).toEqual(
            "linear-gradient(to right, #1B2021 0, #1B2021 12.5%, rgb(255,127,127,.5) 12.5%, rgb(255,127,127,.5) 50%, rgb(157,159,255,.5) 50%, rgb(157,159,255,.5) 92.815%, #1B2021 92.815%, #1B2021 100%)",
            "actual is " + actual);
    });
});
