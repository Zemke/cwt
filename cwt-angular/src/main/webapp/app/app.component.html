<div class="cwt-top-bar" [ngClass]="{'apple-standalone': isAppleStandalone}">
    <div class="container">
        <div class="row ">
            <div class="col-md-6 cwt-gmt">
                <cwt-gmt-clock></cwt-gmt-clock>
            </div>
            <div class="col-md-6 text-md-right all-petite-caps" *ngIf="!authenticatedUser">
                <a routerLink="/login" class="btn">
                    Log in
                </a>
                <a routerLink="/register" class="btn">
                    Register
                </a>
            </div>
            <div class="col-md-6 text-md-right" *ngIf="authenticatedUser">
                <a routerLink="/report" class="btn" *ngIf="(canReportService.canReport | async)">
                    Report
                </a>
                <a routerLink="/admin" class="btn" *ngIf="authenticatedUser.roles.indexOf('ROLE_ADMIN') !== -1">
                    Admin
                </a>
                <button class="btn" (click)="logOut()">
                    Log out
                </button>
                <a routerLink="/" class="btn" style="overflow: hidden;">
                    {{authenticatedUser.username}} <!-- TODO Care for longer usernames -->
                </a>
            </div>
        </div>
    </div>
</div>

<div class="cwt-nav-container">
    <nav [ngClass]="{'apple-standalone': isAppleStandalone, 'cwt-fixed-top': isStandalone || !isNavCollapsed}"
         class="navbar navbar-expand-lg navbar-inverse cwt-navbar">
        <div class="row no-gutters cwt-mobile-nav">
            <div class="col">
                <button (click)="isNavCollapsed = !isNavCollapsed" [ngClass]="{'is-active': !isNavCollapsed}"
                        class="hamburger hamburger--collapse">
                <span class="hamburger-box">
                    <span class="hamburger-inner"></span>
                </span>
                </button>
            </div>
            <div class="col text-center">
                <a routerLink="/" (click)="isNavCollapsed = true">
                    <img src="../img/icon.png" class="rounded-circle">
                </a>
            </div>
            <div class="col text-right user-panel all-petite-caps" ngbDropdown>
                <i class="fa fa-lg cwt-user-panel-icon no-caret" [ngClass]="authenticatedUser ? 'fa-user' : 'fa-user-o'"
                   [ngClass]="{'vanish': !isNavCollapsed}" ngbDropdownToggle>
                </i>
                <div class="dropdown-menu" *ngIf="!authenticatedUser" ngbDropdownMenu>
                    <a routerLink="/login" class="dropdown-item">Log in</a>
                    <div class="dropdown-divider"></div>
                    <a routerLink="/register" class="dropdown-item">Register</a>
                </div>
                <div class="dropdown-menu" *ngIf="authenticatedUser" ngbDropdownMenu>
                    <a routerLink="/" class="dropdown-item">
                        {{authenticatedUser.username}}
                    </a>
                    <button class="dropdown-item" (click)="logOut()">
                        Log out
                    </button>
                    <a routerLink="/" class="dropdown-item" *ngIf="authenticatedUser.roles.indexOf('ROLE_ADMIN') !== -1">
                        Admin
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <div class="navbar navbar-expand-lg container">
        <div [ngClass]="{'apple-standalone': isAppleStandalone}" [ngbCollapse]="isNavCollapsed">
            <ul class="navbar-nav all-petite-caps" (click)="isNavCollapsed = true">
                <li class="nav-item cwt-icon">
                    <a class="nav-link" routerLink="/">
                        <img src="../img/icon.png" class="rounded" (dblclick)="easterEgg()">
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" routerLink="/groups">
                        Groups
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" routerLink="/playoffs">
                        Playoffs
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" routerLink="/games">
                        Games
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" routerLink="/users">
                        Users
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" routerLink="/streams">
                        Streams
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" routerLink="/help">
                        Help
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" routerLink="/donate">
                        Donate
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" routerLink="/archive">
                        Archive
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" routerLink="/more">
                        More&hellip;
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>

<div [hidden]="!isNavCollapsed"
     [ngClass]="{'standalone-container': isStandalone && !isAppleStandalone, 'apple-standalone-container': isAppleStandalone}"
     class="container content">
    <router-outlet></router-outlet>
</div>
<div id="tetris">
    <div id="tetris-gameover">
        <label id="gameover-heading">GAME OVER</label>
    </div>
</div>
